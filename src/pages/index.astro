---
import BaseLayout from "../layouts/BaseLayout.astro";
import getWebinars from "../scripts/webinars.js";
import WebinarSummary from "../components/webinar/WebinarSummary.astro";
import GenerateQuote from "../components/Quoter";
import { getFeaturedCourses } from "../scripts/courses";
import CoursesList from "../components/course/CoursesList.astro";
import BookSummary from "../components/book/BookSummary.astro";
import { getFeaturedBooks } from "../scripts/book";
import Newsletter from "../components/Newsletter.astro";
import BlogList from "../components/blog/BlogList.astro";
import StaticImage from "../components/StaticImage.astro";
import homeImage from "../images/static/i-trust-you-to-listen-and-understand.png";

const webinars = await getWebinars();

const featuredCourses1 = await getFeaturedCourses(0, 2);
const featuredCourses2 = await getFeaturedCourses(2, 4);

const featuredBooks = await getFeaturedBooks();
---

<BaseLayout active="home" pageTitle="Home">
  <div class="page-intro-wrapper">
    <div class="page-intro-image">
      <StaticImage
        image={homeImage}
        alt="Child cuttting grass with a scythe looking at the setting sun"
      />
    </div>

    <div class="page-intro-text">
      <h1>Welcome</h1>
      <p>Here you’ll find the work of Dr Naomi Fisher and Dr Abigail Fisher.</p>
      <p>
        Naomi is a clinical psychologist, author and EMDR-Europe Accredited
        Trainer. She writes and speaks about trauma, autism and alternative
        education.
      </p>
      <p>Abigail is an educational psychologist and qualified teacher.</p>
      <p>
        We offer a range of support for parents and carers alongside resources
        for professionals and teens.
      </p>

      <h2>Webinars, courses and books</h2>
      <p>
        If you’re a parent or carer looking for support, we run regular
        <a href="/webinars">webinars</a>. These are live events but you can
        choose to buy the recording as well.
      </p>

      <p>
        We also have many <a href="/courses">short courses</a> for parents, teenagers
        and professionals to watch. These are entirely on-demand and can be viewed
        in your own time.
      </p>

      <p>
        Naomi has written several <a href="/books">books</a>. Her latest book, <a
          href="/books/when-the-naughty-step-makes-things-worse"
          >When the Naughty Step Makes Things Worse</a
        >, is now available for pre-order.
      </p>
      <p>
        Naomi also <a href="/blog">blogs regularly</a>.
      </p>

      <h2>Professional training</h2>
      <p>
        Naomi runs a variety of <a href="/training/">training courses</a> on many
        topics including neurodiversity and trauma.
      </p>

      <h3>EMDR Training</h3>
      <p>
        Naomi delivers <a href="/training#online-EMDR-basic-training"
          >online EMDR Basic Training</a
        > for professionals and <a href="/training#EMDR-refresher-day"
          >EMDR Refresher Days</a
        > for those who are already trained but who need to brush up their skills
        and knowledge. She can also run <a
          href="/training#in-house-EMDR-basic-training"
          >in-house EMDR Basic Training</a
        > for your NHS trust or organisation
      </p>
    </div>
  </div>

  <a name="webinars" class="anchor">
    <h2 class="section-title">
      <span class="webinars-section-title">Upcoming Webinars</span>
    </h2>
  </a>

  {webinars.map((webinar, index) => <WebinarSummary webinar={webinar} />)}

  {console.log(webinars.length)}
  {webinars.length % 2 !== 0 && <Newsletter />}

  <CoursesList
    courses={featuredCourses1}
    categoryId="featured"
    categoryName="Featured Courses"
  />

  <Newsletter />

  <CoursesList courses={featuredCourses2} />

  <a name="books" class="anchor">
    <h2 class="section-title">
      <span class="books-section-title">Featured Books</span>
    </h2>
  </a>
  {featuredBooks.map((book) => <BookSummary book={book.data} />)}

  <a name="blog" class="anchor">
    <h2 class="section-title">
      <span class="blog-section-title">Latest Blog Posts</span>
    </h2>
  </a>

  <BlogList length="2" />

  <GenerateQuote
    client:load
    quotes={[
      {
        text: "This is a great webinar",
        author: "Webinar attendee 100",
      },
      {
        text: "This is a nice webinar",
        author: "Webinar attendee 101",
      },
    ]}
  />
</BaseLayout>
