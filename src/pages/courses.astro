---
import {
  getCoursesWithTagWithoutOtherTags,
  getLatestCourses,
} from "../scripts/courses";
import BaseLayout from "../layouts/BaseLayout.astro";
import CoursesList from "../components/course/CoursesList.astro";

import {
  forProfessionals,
  forTeens,
  tagALDP,
  tagAnxiety,
  tagAutism,
  tagBurnout,
  tagDemandAvoidance,
  tagEHCP,
  tagEMDR,
  tagNeurodiversity,
  tagSchool,
  tagTrauma,
} from "../scripts/tags";

const latestCourses = await getLatestCourses();

const autismCourses = await getCoursesWithTagWithoutOtherTags([tagAutism,tagNeurodiversity]);

const demandAvoidanceCourses = await getCoursesWithTagWithoutOtherTags([tagDemandAvoidance]);

const anxietyCourses = await getCoursesWithTagWithoutOtherTags([
  tagAnxiety,
  tagTrauma,
]);

const burnoutCourses = await getCoursesWithTagWithoutOtherTags([tagBurnout]);

const schoolCourses = await getCoursesWithTagWithoutOtherTags([tagSchool],[tagEHCP, tagALDP]);

const ehcpCourses = await getCoursesWithTagWithoutOtherTags([tagEHCP]);

const lowDemandParentingCourses = await getCoursesWithTagWithoutOtherTags([
  tagALDP,
]);

const forTeensCourses = await getCoursesWithTagWithoutOtherTags([forTeens]);

const forProfessionalsCourses = await getCoursesWithTagWithoutOtherTags([
  forProfessionals,
  tagEMDR,
]);
---

<BaseLayout active="courses" pageTitle="Courses">
  <div class="page-intro-wrapper">
    <div class="page-intro-image">
      <img
        srcset="imgs/page-image-620.jpg 620w, imgs/page-image-1080.jpg 1080w"
        sizes="(min-width: 1200px) 520px, (min-width: 780px) 780px, 100vw"
        src="imgs/page-image-620.jpg.jpg"
        alt="an image description for the visually impaired, also helps SEO"
      />
    </div>
    <div class="page-intro-text">
      <p>
        We have a growing library of mini-courses. Most are for parents, but
        some are for teenagers or professionals to watch.
      </p>

      <p>
        They are pre-recorded and divided into small, manageable modules. You
        can watch them in your own time, on whatever device you prefer. You can
        watch the modules as many times as you like.
      </p>

      <p>They are available for for 12 months after purchase.</p>

      <p>
        Our courses combine psychological theory with practical ideas from
        clinical practice. They are quite information-dense and you might need
        to watch some of the modules several times. They will help you to
        understand what is going on for your child (or you yourself) and get
        some ideas as to how to help.
      </p>

      <p>
        Some courses are aimed at specific children or ages, whilst others are
        for everyone.
      </p>

      <p>
        Please get in touch if you have ideas for new things you would like us
        to cover.
      </p>
    </div>
  </div>

  <div class="info-section-wrapper">
    <div class="info-text">
      <p>
        We understand finding the right support can sometimes be overwhelming.
        To help you find the courses you want, weâ€™ve grouped them into the
        following categories:
      </p>
    </div>
    <div class="info-links">
      <a href="#latest" class="filter-courses"> Latest Courses </a>
      <a href="#autism" class="filter-courses"> Autism </a>
      <a href="#demand-avoidance" class="filter-courses"> Demand Avoidance </a>

      <a href="#anxiety" class="filter-courses"> Anxiety </a>
      <a href="#burnout" class="filter-courses"> Burnout </a>

      <a href="#school" class="filter-courses"> School </a>
      <a href="#ehcp" class="filter-courses"> EHCP </a>

      <a href="#low-demand-parenting" class="filter-courses">
        Low Demand Parenting
      </a>
      <a href="#for-teens" class="filter-courses"> For Teens </a>
      <a href="#for-professionals" class="filter-courses">
        For Professionals
      </a>
    </div>
  </div>

  <CoursesList
    courses={latestCourses}
    categoryId="latest"
    categoryName="Latest Courses"
  />

  <CoursesList
    courses={autismCourses}
    categoryId="autism"
    categoryName="Autism Courses"
  />

  <CoursesList
    courses={demandAvoidanceCourses}
    categoryId="demand-avoidance"
    categoryName="Demand Avoidance Courses"
  />

  <CoursesList
    courses={anxietyCourses}
    categoryId="anxiety"
    categoryName="Anxiety Courses"
  />

  <CoursesList
    courses={burnoutCourses}
    categoryId="burnout"
    categoryName="Burnout Courses"
  />

  <CoursesList
    courses={schoolCourses}
    categoryId="school"
    categoryName="School Courses"
  />

  <CoursesList
    courses={ehcpCourses}
    categoryId="ehcp"
    categoryName="EHCP Courses"
  />

  <CoursesList
    courses={lowDemandParentingCourses}
    categoryId="low-demand-parenting"
    categoryName="Low Demand Parenting Courses"
  />

  <CoursesList
    courses={forTeensCourses}
    categoryId="for-teens"
    categoryName="Courses For Teens to Watch"
  />

  <CoursesList
    courses={forProfessionalsCourses}
    categoryId="for-professionals"
    categoryName="Courses for Professionals"
  />
</BaseLayout>
