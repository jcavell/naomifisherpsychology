---
import { makeUrl } from "../../scripts/url";
import CourseLayout from "../../layouts/CourseLayout.astro";
import CourseDetails from "../../components/CourseDetails.astro";
import getCourses from "../../scripts/courses";
import { getRelated } from "../../scripts/courses";

export async function getStaticPaths() {
  const courses = await getCourses();

  return courses.map((course) => ({
    params: { title: makeUrl(course.data.title) },
    props: {
      course: course,
      related: getRelated(courses, course),
    },
  }));
}

const { course, related } = Astro.props;
---

<CourseLayout pageTitle={course.data.title}>
  <CourseDetails course={course.data} related={related} />
</CourseLayout>
