---
import { getCollection } from "astro:content";
import { makeUrl } from "../../scripts/url";
import BlogDetails from "../../components/BlogDetails.astro";
import BlogLayout from "../../layouts/BlogLayout.astro";

export async function getStaticPaths() {
 
  const posts = await getCollection("blog");

  return (
    posts
      .map((post) => ({
        params: { title: makeUrl(post.data.title) },
        props: { post },
      }))
  );
}

const { post } = Astro.props;
---

<BlogLayout pageTitle={post.data.title}>
  <BlogDetails
    url={`${post.data.url}`}
    imageFileName={post.data.imageFileName}
    title={post.data.title}
    subtitle={post.data.subtitle}
    pubDate={post.data.pubDate}
    paragraphs={post.data.paragraphs}
    tags={post.data.tags}
  />
</BlogLayout>
