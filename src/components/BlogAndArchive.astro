---
import { getCollection } from "astro:content";

import BlogSummary from "./BlogSummary.astro";
import BlogLayout from "../layouts/BlogLayout.astro";
import { getOrderedPosts } from "../scripts/blog";

const { isArchive } = Astro.props;

const pageTitle = isArchive ? " archive" : "";
const posts = await getOrderedPosts();

const sliceStart = isArchive ? 6 : 0;
const sliceEnd = isArchive ? posts.length : 6;
---

<BlogLayout pageTitle="Blog">
  {
    posts
      .slice(sliceStart, sliceEnd)
      .map((post) => (
        <BlogSummary
          url={`${post.data.url}`}
          imageFileName={post.data.imageFileName}
          title={post.data.title}
          subtitle={post.data.subtitle}
          pubDate={post.data.pubDate}
          paragraphs={post.data.paragraphs}
          tags={post.data.tags}
        />
      ))
  }
</BlogLayout>
