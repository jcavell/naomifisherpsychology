---
import { getTags } from "../scripts/tags";
import Tags from "./Tags.astro";
import { makeUrl } from "../scripts/url";

const { title, subtitle, paragraphs, imageFileName, pubDate, url } =
  Astro.props;

const body = paragraphs.reduce((acc: string, curr: string) => acc + " " + curr);
const tags = getTags(title, subtitle, body);
---

<div class="card card-courses">
  <div class="live-date">
    <span class="live-day"> {pubDate.day} </span>
    <span class="live-month"> {pubDate.month} </span>
  </div>
  <h2>
    <a href=`/blog/${makeUrl(title)}`>{title}</a>
  </h2>

  <p>Substack:<a href={url}>{title}</a></p>

  <img
    loading="lazy"
    src={`/images/blog/${imageFileName}`}
    alt=`Image for ${title}`
  />

  <div class="card-details">
    <a href="#" class="card-type-course"> BLOG </a>
    <span> {subtitle} </span>
  </div>

  <p>
    {body}
  </p>

  <div class="card-meta">
    <span class="contributors"> Dr Naomi Fisher </span>

    <Tags tags={tags} />
  </div>

  <div class="card-buttons">
    <a href="#"> Learn More </a>
    <a href="#"> Purchase </a>
  </div>
</div>
