---
import { makeUrl, getImagePath } from "../scripts/url";
import Contributers from "./Contributers.astro";
import CourseSummary from "./CourseSummary.astro";
import Tags from "./Tags.astro";

const { course, related } = Astro.props;

const price = course.price;
const imageFileName = course.imageFileName;
const checkoutURL = course.checkoutUrl;
const title = course.title;
const summary = course.description;
const descriptions = course.checkout?.descriptions;
const testimonials = course.checkout?.testimonials;
const people = course.people;
const tags = course.tags;
---

<div class="card card-courses">
  <h2>
    <a href=`/courses/${makeUrl(title)}`>{title}</a>
  </h2>

  <img
    loading="lazy"
    src={`/images/courses/${imageFileName}`}
    alt=`Image for ${title}`
  />

  <div class="card-details">
    <a href="#" class="card-type-course"> RECORDED COURSE </a>
    <span> 2 HOURS, {price} </span>
  </div>

  {descriptions.map((description) => <p>{description}</p>)}

  {testimonials.map((testimonial) => <p>{testimonial}</p>)}

  <div class="card-meta">
    <Contributers people={people} />
    <Tags tags={tags} />
  </div>

  <div class="card-buttons">
    <a href={checkoutURL}> Purchase </a>
  </div>
</div>

<div>Related</div>

{related.map((course) => <CourseSummary course={course.data} />)}
