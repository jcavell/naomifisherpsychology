---
import Tags from "../Tags.astro";
import Contributers from "../Contributers.astro";
import Vimeo from "../Vimeo.astro";
import { getWebinarMeta } from "../../scripts/webinarMeta";
import WebinarImage from "./WebinarImage.astro";

const { webinar } = Astro.props;

const eventId = webinar.id;
const meta = getWebinarMeta(eventId);

const checkoutURL = webinar.url;
const title = webinar.name.text;
const subtitle = webinar.description.text;
const tickets = webinar.orderedTickets;
---

<div class="card card-webinars">
  <div class="live-date">
    <span class="live-day">{webinar.day}</span>
    <span class="live-month">{webinar.month}</span>
  </div>

  <h2>
    <a href={`/webinars/${eventId}`}>{title}</a>
  </h2>

  <div class="card-image">
    <WebinarImage webinar={webinar} />
  </div>

  <!-- <div class="card-image">
    <img
      srcset="imgs/example-image-620.jpg 620w, imgs/example-image-1016.jpg 1016w, imgs/example-image-2176.jpg 2176w"
      sizes="(min-width: 1185px) 508px, (min-width: 780px) 728px, 100vw"
      src="imgs/example-image-620.jpg"
      alt="an image description for the visually impaired, also helps SEO"
      loading="lazy"
    />
  </div> -->

  <div class="card-details">
    <a href="/webinars/"> LIVE WEBINAR </a>
    <span class="date">
      {`${webinar.day} ${webinar.monthLong} ${webinar.year}`}
    </span>
    <span class="time">
      {`${webinar.startTime} - ${webinar.endTime}`}
    </span>
    <span class="cost"> from {tickets[0].cost} + booking fee </span>
  </div>

  <p>
    {subtitle}
  </p>

  <div class="card-meta">
    <Contributers people={meta?.contributers} />
    <Tags tags={meta?.tags} />
  </div>

  <div class="card-buttons">
    <a href={`/webinars/${eventId}`}> Learn More </a>
    <a href={`${checkoutURL}?aff=web`}> Tickets </a>
  </div>
</div>
