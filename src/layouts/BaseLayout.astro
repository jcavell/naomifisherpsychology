---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import NaomiStyle from "../styles/naomiStyle.astro";
import CookieConsent from "../components/CookieConsent.astro";

const { active, tagName, tagUrl, bodyClassName, metaDescription, hideNav } = Astro.props;

const bodyClass = bodyClassName
  ? bodyClassName
  : tagName
    ? "tag-page topic-page"
    : "category-" + active;
---

<!doctype html>
<html lang="en">
  <head>

    <script>
      import { persistCouponFromURL } from "../scripts/coupon/couponRetrieverAndStorer";
      import { persistTrackerFromURL } from "../scripts/tracking/trackerRetrieverAndStorer";

      document.addEventListener('DOMContentLoaded', () => {
        persistCouponFromURL();
        persistTrackerFromURL();
      });
    </script>

    <!-- Meta Pixel Code -->
    <script is:inline>
      !(function (f, b, e, v, n, t, s) {
        if (f.fbq) return;
        n = f.fbq = function () {
          n.callMethod
            ? n.callMethod.apply(n, arguments)
            : n.queue.push(arguments);
        };
        if (!f._fbq) f._fbq = n;
        n.push = n;
        n.loaded = !0;
        n.version = "2.0";
        n.queue = [];
        t = b.createElement(e);
        t.async = !0;
        t.src = v;
        s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s);
      })(
        window,
        document,
        "script",
        "https://connect.facebook.net/en_US/fbevents.js",
      );
      fbq("init", "162835596799108");
      fbq("track", "PageView");
    </script>
    <noscript
    ><img
      height="1"
      width="1"
      style="display:none"
      src="https://www.facebook.com/tr?id=162835596799108&ev=PageView&noscript=1"
    /></noscript
    >
    <!-- End Meta Pixel Code -->

    <!-- Google tag (gtag.js) -->
    <script
      is:inline
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-12YTPF8CY7"></script>

    <script is:inline>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
    dataLayer.push(arguments);
  }
    gtag("js", new Date());
    gtag("config", "G-12YTPF8CY7");
    </script>


    <script src="../scripts/accordion.js"></script>

    <meta charset="utf-8" />

    {metaDescription && <meta name="description" content={metaDescription} />}

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dr. Naomi Fisher</title>
    <link rel="icon" type="image/x-icon" href="/naomi-logo.ico" />
    <NaomiStyle />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Oswald:wght@200..700&family=Yanone+Kaffeesatz:wght@200..700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body class={bodyClass}>

    {!hideNav && (
      <button class="hamburger hamburger--squeeze" id="menu-toggle" type="button">
      <span class="hamburger-box">
      <span class="hamburger-inner"></span>
      </span>
      </button>
      )}

    <Header active={active} hideNav={hideNav} />

    {
      tagName && tagUrl && (
        <div class="page-title">
          <a href={tagUrl}>
            <h1>{tagName}</h1>
          </a>
        </div>
      )
    }

    <div class="wrapper">
      <slot />
    </div>
    <Footer hideNav={hideNav}/>

    <div class="top-trigger">
      <a href="#"> Top </a>
    </div>
    <CookieConsent />
  </body>
</html>
